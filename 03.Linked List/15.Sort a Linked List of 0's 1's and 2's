/*
Definition of singly linked list:
class ListNode{
    public int data;
    public ListNode next;
    ListNode() { data = 0; next = null; }
    ListNode(int x) { data = x; next = null; }
    ListNode(int x, ListNode next) { data = x; this.next = next; }
}
*/

class Solution {
    public ListNode sortList(ListNode head) {
        if (head == null || head.next == null) return head;

        ListNode zeroDummy = new ListNode(-1);
        ListNode oneDummy  = new ListNode(-1);
        ListNode twoDummy  = new ListNode(-1);

        ListNode zeroTail = zeroDummy;
        ListNode oneTail  = oneDummy;
        ListNode twoTail  = twoDummy;

        ListNode curr = head;

        while (curr != null) {
            ListNode nextNode = curr.next;
            curr.next = null;             

            if (curr.data == 0) {
                zeroTail.next = curr;
                zeroTail = zeroTail.next;
            } else if (curr.data == 1) {
                oneTail.next = curr;
                oneTail = oneTail.next;
            } else {
                twoTail.next = curr;
                twoTail = twoTail.next;
            }

            curr = nextNode;
        }

    
        zeroTail.next = (oneDummy.next != null) ? oneDummy.next : twoDummy.next;
        oneTail.next = twoDummy.next;

        return zeroDummy.next;
    }
}
